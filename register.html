<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatlify - Create Account</title>
    <meta name="description" content="Sign up for Chatlify and connect with your friends, communities, and the world.">
    <link rel="icon" href="images/favicon.svg" type="image/svg+xml">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/auth.css">
    <script src="js/main.js" defer></script>
    <!-- Supabase Client -->
    <script type="module" src="js/auth_config.js"></script>
    <script type="module" src="js/register.js" defer></script>
</head>

<body>
    <div class="bg-particles">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>

    <header>
        <nav>
            <div class="logo">
                <svg class="logo-svg" width="40" height="40" viewBox="0 0 200 200">
                    <defs>
                        <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stop-color="#6a11cb" />
                            <stop offset="100%" stop-color="#2575fc" />
                        </linearGradient>
                        <filter id="glow">
                            <feGaussianBlur stdDeviation="5" result="blur" />
                            <feComposite in="SourceGraphic" in2="blur" operator="over" />
                        </filter>
                        <clipPath id="circle-clip">
                            <circle cx="100" cy="100" r="85" />
                        </clipPath>
                    </defs>
                    <!-- Main Logo Circle -->
                    <circle cx="100" cy="100" r="85" fill="#16213e" stroke="url(#gradient)" stroke-width="5"
                        opacity="0.7" />
                    <!-- Logo Path -->
                    <path class="logo-path"
                        d="M100,30 C60,30 30,60 30,100 C30,140 60,170 100,170 C140,170 170,140 170,100" fill="none"
                        stroke="url(#gradient)" stroke-width="10" stroke-linecap="round" filter="url(#glow)" />
                    <!-- C Letter -->
                    <text x="75" y="125" class="logo-text" fill="white" font-size="80" font-family="Poppins, sans-serif"
                        font-weight="bold" filter="url(#glow)">C</text>
                </svg>
                <span>CHATLIFY</span>
            </div>
            <div class="nav-links">
                <a href="home.html">Home</a>
                <a href="community.html">Community</a>
                <a href="support.html">Support</a>
                <a href="download.html">Download</a>
            </div>
            <div class="nav-buttons">
                <a href="#" class="login-btn">Sign Up</a>
                <a href="download.html" class="download-btn">Download Now</a>
            </div>
        </nav>
    </header>

    <main>
        <div class="auth-container">
            <div class="auth-card register-card">
                <div class="auth-header">
                    <div class="auth-logo">
                        <svg class="logo-svg-large" width="70" height="70" viewBox="0 0 200 200">
                            <defs>
                                <linearGradient id="auth-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" stop-color="#6a11cb" />
                                    <stop offset="100%" stop-color="#2575fc" />
                                </linearGradient>
                                <filter id="auth-glow">
                                    <feGaussianBlur stdDeviation="5" result="blur" />
                                    <feComposite in="SourceGraphic" in2="blur" operator="over" />
                                </filter>
                            </defs>
                            <!-- Main Logo Circle -->
                            <circle cx="100" cy="100" r="85" fill="#16213e" stroke="url(#auth-gradient)"
                                stroke-width="5" opacity="0.7" />
                            <!-- Logo Path -->
                            <path class="logo-path"
                                d="M100,30 C60,30 30,60 30,100 C30,140 60,170 100,170 C140,170 170,140 170,100"
                                fill="none" stroke="url(#auth-gradient)" stroke-width="10" stroke-linecap="round"
                                filter="url(#auth-glow)" />
                            <!-- C Letter -->
                            <text x="75" y="125" class="logo-text" fill="white" font-size="80"
                                font-family="Poppins, sans-serif" font-weight="bold" filter="url(#auth-glow)">C</text>
                        </svg>
                    </div>
                    <h1>Create <span class="highlight">Account</span></h1>
                    <p>Join Chatlify and become part of our community</p>
                </div>

                <form id="registerForm" class="auth-form">
                    <div class="form-group">
                        <label for="username">Username</label>
                        <div class="input-with-icon">
                            <i class="fas fa-user"></i>
                            <input type="text" id="username" name="username" placeholder="Enter your username" required>
                        </div>
                        <div class="error-message" id="usernameError">Username must be at least 3 characters</div>
                    </div>

                    <div class="form-group">
                        <label for="email">Email Address</label>
                        <div class="input-with-icon">
                            <i class="fas fa-envelope"></i>
                            <input type="email" id="email" name="email" placeholder="Enter your email address" required>
                        </div>
                        <div class="error-message" id="emailError">Please enter a valid email address</div>
                    </div>

                    <div class="form-group">
                        <label for="password">Password</label>
                        <div class="input-with-icon">
                            <i class="fas fa-lock"></i>
                            <input type="password" id="password" name="password" placeholder="Enter your password"
                                required>
                            <i class="fas fa-eye toggle-password"></i>
                        </div>
                        <div class="error-message" id="passwordError">Password must be at least 8 characters</div>
                    </div>

                    <div class="form-group">
                        <label for="confirm-password">Confirm Password</label>
                        <div class="input-with-icon">
                            <i class="fas fa-lock"></i>
                            <input type="password" id="confirm-password" name="confirm-password"
                                placeholder="Re-enter your password" required>
                            <i class="fas fa-eye toggle-password"></i>
                        </div>
                        <div class="error-message" id="confirmPasswordError">Passwords do not match</div>
                    </div>

                    <div class="password-strength">
                        <div class="strength-meter">
                            <div class="strength-segment"></div>
                            <div class="strength-segment"></div>
                            <div class="strength-segment"></div>
                            <div class="strength-segment"></div>
                        </div>
                        <span class="strength-text">Password strength: <span id="strengthValue">Weak</span></span>
                    </div>

                    <div class="form-options">
                        <div class="terms-check">
                            <input type="checkbox" id="terms" name="terms" required>
                            <label for="terms">
                                I agree to the <a href="legal/terms-of-service.html" target="_blank">Terms of
                                    Service</a> and
                                <a href="legal/privacy-policy.html" target="_blank">Privacy Policy</a>
                            </label>
                        </div>
                        <div class="error-message" id="termsError">You must accept the Terms of Service</div>
                    </div>

                    <button type="submit" class="submit-btn">
                        <span class="btn-text">Create Account</span>
                        <div class="loading-spinner">
                            <div class="spinner"></div>
                        </div>
                    </button>
                </form>

                <div class="auth-footer">
                    <p>Already have an account? <a href="login.html">Sign In</a></p>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-logo">
                <svg class="logo-svg" width="40" height="40" viewBox="0 0 200 200">
                    <defs>
                        <linearGradient id="footer-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stop-color="#6a11cb" />
                            <stop offset="100%" stop-color="#2575fc" />
                        </linearGradient>
                        <filter id="footer-glow">
                            <feGaussianBlur stdDeviation="5" result="blur" />
                            <feComposite in="SourceGraphic" in2="blur" operator="over" />
                        </filter>
                        <clipPath id="footer-circle-clip">
                            <circle cx="100" cy="100" r="85" />
                        </clipPath>
                    </defs>
                    <!-- Main Logo Circle -->
                    <circle cx="100" cy="100" r="85" fill="#16213e" stroke="url(#footer-gradient)" stroke-width="5"
                        opacity="0.7" />
                    <!-- Logo Path -->
                    <path class="logo-path"
                        d="M100,30 C60,30 30,60 30,100 C30,140 60,170 100,170 C140,170 170,140 170,100" fill="none"
                        stroke="url(#footer-gradient)" stroke-width="10" stroke-linecap="round"
                        filter="url(#footer-glow)" />
                    <!-- C Letter -->
                    <text x="75" y="125" class="logo-text" fill="white" font-size="80" font-family="Poppins, sans-serif"
                        font-weight="bold" filter="url(#footer-glow)">C</text>
                </svg>
                <span>CHATLIFY</span>
            </div>
            <div class="footer-links">
                <div class="footer-column">
                    <h3>Features</h3>
                    <ul>
                        <li><a href="#">Voice Chat</a></li>
                        <li><a href="#">Chatlify Premium</a></li>
                        <li><a href="#">Communities</a></li>
                        <li><a href="#">Integrations</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Company</h3>
                    <ul>
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Careers</a></li>
                        <li><a href="#">Press Room</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Resources</h3>
                    <ul>
                        <li><a href="#">Help Center</a></li>
                        <li><a href="#">Community Guidelines</a></li>
                        <li><a href="#">Announcements</a></li>
                        <li><a href="#">Developer API</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Legal</h3>
                    <ul>
                        <li><a href="legal/terms-of-service.html">Terms of Service</a></li>
                        <li><a href="legal/privacy-policy.html">Privacy Policy</a></li>
                        <li><a href="legal/security.html">Security</a></li>
                        <li><a href="legal/data-protection.html">Data Protection</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <div class="social-links">
                <a href="https://x.com/Chatlifyapp" target="_blank" rel="noopener noreferrer"><i
                        class="fab fa-twitter"></i></a>
                <a href="https://www.instagram.com/chatlifyapp/" target="_blank" rel="noopener noreferrer"><i
                        class="fab fa-instagram"></i></a>
                <a href="https://www.youtube.com/@Chatlify" target="_blank" rel="noopener noreferrer"><i
                        class="fab fa-youtube"></i></a>
                <a href="https://www.tiktok.com/@chatlifyapp" target="_blank" rel="noopener noreferrer"><i
                        class="fab fa-tiktok"></i></a>
            </div>
            <div class="copyright">
                <p>&copy; 2025 Chatlify Inc. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        const SUPABASE_URL = 'https://omyoobepjyyyvemovyim.supabase.co'
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9teW9vYmVwanl5eXZlbW92eWltIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzUxNjIyNDksImV4cCI6MjA1MDczODI0OX0.-aNn51tjlgKLE9GssA0H4WvuCTYS3SMWIsJ4pz-PxqQ'

        const { createClient } = supabase
        const _supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY)

        console.log('Supabase Initialized');

        const registerForm = document.getElementById('registerForm');
        const submitButton = registerForm.querySelector('button[type="submit"]');
        const btnText = submitButton.querySelector('.btn-text');
        const spinner = submitButton.querySelector('.loading-spinner');

        const generalError = document.createElement('div');
        generalError.style.color = 'red';
        generalError.style.marginTop = '10px';
        registerForm.parentNode.insertBefore(generalError, registerForm.nextSibling);

        registerForm.addEventListener('submit', async (event) => {
            event.preventDefault();
            btnText.style.display = 'none';
            spinner.style.display = 'block';
            submitButton.disabled = true;
            generalError.textContent = '';

            const emailInput = document.getElementById('email');
            const passwordInput = document.getElementById('password');
            const usernameInput = document.getElementById('username');

            const email = emailInput.value;
            const password = passwordInput.value;
            const username = usernameInput.value;

            const { data, error } = await _supabase.auth.signUp({
                email: email,
                password: password,
                options: {
                    data: {
                        username: username
                    }
                }
            });

            if (error) {
                console.error('Error signing up:', error.message);
                generalError.textContent = `Kayıt hatası: ${error.message}`;
            } else {
                console.log('Sign up successful, user needs to confirm email:', data);
                registerForm.style.display = 'none';
                generalError.style.color = 'green';
                generalError.textContent = 'Kayıt başarılı! Lütfen email adresinize gönderilen doğrulama linkine tıklayın.';
            }

            btnText.style.display = 'inline';
            spinner.style.display = 'none';
            submitButton.disabled = false;
        });
    </script>
</body>

</html>